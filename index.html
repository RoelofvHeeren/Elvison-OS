<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>elvison-ai</title>
</head>

<body>
  <video class="bg-video" autoplay muted playsinline>
    <source src="/bg-video.mp4" type="video/mp4">
  </video>
  <div id="root"></div>
  <script type="module" src="/src/main.jsx"></script>
  <script>
    const video = document.querySelector('.bg-video');
    let direction = 1; // 1 = forward, -1 = backward
    let lastTime = 0;

    // Ensure video plays
    video.play().catch(console.error);

    function animateLoop(timestamp) {
      if (!lastTime) lastTime = timestamp;
      const delta = (timestamp - lastTime) / 1000; // seconds
      lastTime = timestamp;

      if (!video.paused) {
        if (direction === 1) {
          // Forward is handled by native playback, just check for end
          if (video.currentTime >= video.duration - 0.1) {
            direction = -1;
            video.pause(); // Stop native playback to take manual control
          }
        } else {
          // Manual reverse playback
          video.currentTime = Math.max(0, video.currentTime - delta);
          if (video.currentTime <= 0.1) {
            direction = 1;
            video.play(); // Resume native forward playback
          }
        }
      } else if (direction === -1) {
        // Continue manual reverse even if "paused" (since we paused native playback)
        video.currentTime = Math.max(0, video.currentTime - delta);
        if (video.currentTime <= 0.1) {
          direction = 1;
          video.play();
        }
      }

      requestAnimationFrame(animateLoop);
    }

    requestAnimationFrame(animateLoop);
  </script>
</body>

</html>